// ========== ENUMS ==========
Enum Role {
  ADMIN
  CLIENT
}

Enum ReservationStatus {
  PENDING
  CONFIRMED
  CANCELLED
  COMPLETED
}

Enum PurchaseStatus {
  PENDING
  DELIVERED
  CANCELLED
}

// ========== TABLES ==========

Table User {
  id         varchar [pk, unique]
  email      varchar [unique]
  password   varchar
  firstname  varchar
  lastname   varchar
  role       Role
  phone      varchar
  createdAt  datetime
  updatedAt  datetime
}

Table Prestation {
  id           varchar [pk]
  title        varchar
  description  text
  duration     int     // minutes
  price        float
  createdAt    datetime
  updatedAt    datetime
  categoryId   varchar
}

Table Product {
  id           varchar [pk]
  name         varchar
  description  text
  price        float
  stock        int
  createdAt    datetime
  updatedAt    datetime
  categoryId   varchar
}

Table Category {
  id           varchar [pk]
  name         varchar
  description  text
}

Table Reservation {
  id             varchar [pk]
  startDate      datetime
  endDate      datetime
  status         ReservationStatus
  price        float
  createdAt      datetime
  userId         varchar
  prestationId   varchar
}

Table Purchase {
  id         varchar [pk]
  createdAt  datetime
  status     PurchaseStatus
  price        float
  userId     varchar
  productId  varchar
}

Table Review {
  id         varchar [pk]
  content    text
  rating     int
  visible    boolean
  createdAt  datetime
  userId     varchar
}

Table RecurringSlot {
  id         varchar [pk]
  dayOfWeek  int   // 0 = lundi
  startTime  varchar
  endTime    varchar
}

Table RecurringSlotException {
  id    varchar [pk]
  date  datetime
}

Table OneTimeSlot {
  id        varchar [pk]
  date      datetime
  startTime varchar
  endTime   varchar
}

// ========== RELATIONS ==========

// Reservation -> User
Ref: Reservation.userId > User.id

// Reservation -> Prestation
Ref: Reservation.prestationId > Prestation.id

// Prestation -> Category
Ref: Prestation.categoryId > Category.id

// Product -> Category
Ref: Product.categoryId > Category.id

// Purchase -> User
Ref: Purchase.userId > User.id

// Purchase -> Product
Ref: Purchase.productId > Product.id

// Review -> User
Ref: Review.userId > User.id
